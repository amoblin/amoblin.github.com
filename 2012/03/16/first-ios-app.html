<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <meta name="author" content="Linghua Zhang" />
    <title>第一个iOS程序</title>
    <link rel="shortcut icon" href="/favicon.ico">
    <link href="/atom.xml" rel="alternate" title="setImpl" type="application/atom+xml" />
    <link rel="stylesheet" href="/media/styles/style.css">
    <link rel="stylesheet" href="/media/styles/github.css">
    <script type="text/javascript" src="/media/js/highlight.pack.js"></script>
    <script type="text/javascript">
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
    <div id="container">
      <div id="main" role="main">
        <header>
        <h1>第一个iOS程序</h1>
        </header>
        <nav>
        <span><a title="home page" class="" href="/">home</a></span>
        <span><a title="tags" class="" href="/tags.html">tags</a></span>
        <span><a title="blogroll" class="" href="/links.html">links</a></span>
        <span><a title="subscribe me" class="" href="/atom.xml">feed</a></span>
        </nav>
        <article class="content">
        <section class="post">
<!-- publish: YES -->
<p>1月19日开始第一个ios开发程序。</p>
<p>在Xcode4.2下创建一个SingleView Application项目first</p>
<p>Device Family: iPhone
Use Storyboard
Use Automatic Reference Counting</p>
<p>进入first项目根目录，有两个目录first和first.xcodeproj。进入first目录。</p>
<p>查看文件：</p>
<pre class="code console literal-block">
<span class="generic prompt">$</span> <span class="name builtin">cd </span>first
<span class="generic prompt">$</span> ls
<span class="generic output">AppDelegate.h    ViewController.h en.lproj         first-Prefix.pch
AppDelegate.m    ViewController.m first-Info.plist main.m</span>
</pre>
<p>Storyboard在这里：</p>
<pre class="code console literal-block">
<span class="generic prompt">$</span> ls en.lproj/
<span class="generic output">InfoPlist.strings         MainStoryboard.storyboard</span>
</pre>
<p>Storyboard的层次结构：</p>
<pre class="code console literal-block">
<span class="generic output">document
    dependencies
    scenes
        scene
            objects
                placeholder
                viewController
                    view
                        rect
                        autoresizingMask
                        subviews
                        color
                    connections
                        outlet
    classes(一开始木有)
    simulatedMetricsContainer</span>
</pre>
<div class="section" id="label">
<h2>添加一个Label</h2>
<pre class="code console literal-block">
<span class="generic output">-                        &lt;subviews/&gt;
+                        &lt;subviews&gt;
+                            &lt;label opaque=&quot;NO&quot; clipsSubviews=&quot;YES&quot; userInteractionEnabled=&quot;NO&quot; contentMode=&quot;left&quot; text=&quot;Label&quot; lineBre
+                                &lt;rect key=&quot;frame&quot; x=&quot;139&quot; y=&quot;20&quot; width=&quot;42&quot; height=&quot;21&quot;/&gt;
+                                &lt;autoresizingMask key=&quot;autoresizingMask&quot; flexibleMaxX=&quot;YES&quot; flexibleMaxY=&quot;YES&quot;/&gt;
+                                &lt;fontDescription key=&quot;fontDescription&quot; type=&quot;system&quot; pointSize=&quot;17&quot;/&gt;
+                                &lt;color key=&quot;textColor&quot; cocoaTouchSystemColor=&quot;darkTextColor&quot;/&gt;
+                                &lt;nil key=&quot;highlightedColor&quot;/&gt;
+                            &lt;/label&gt;
+                        &lt;/subviews&gt;
                         &lt;color key=&quot;backgroundColor&quot; white=&quot;1&quot; alpha=&quot;1&quot; colorSpace=&quot;custom&quot; customColorSpace=&quot;calibratedWhite&quot;/&gt;
                     &lt;/view&gt;
                 &lt;/viewController&gt;
             &lt;/objects&gt;
         &lt;/scene&gt;
     &lt;/scenes&gt;
+    &lt;classes&gt;
+        &lt;class className=&quot;ViewController&quot; superclassName=&quot;UIViewController&quot;&gt;
+            &lt;source key=&quot;sourceIdentifier&quot; type=&quot;project&quot; relativePath=&quot;./Classes/ViewController.h&quot;/&gt;
+        &lt;/class&gt;
+    &lt;/classes&gt;</span>
</pre>
<p>做了2件事：</p>
<ol class="arabic simple">
<li>在subviews里增加了label，设置了相关属性。</li>
<li>在document下，scenes后增加了classes元素，关联到了ViewController.h文件，来做以后的事件处理。</li>
</ol>
</div>
<div class="section" id="outlet">
<h2>设置Outlet关联</h2>
<p>修改了如下3个文件：</p>
<pre class="code console literal-block">
<span class="generic prompt">#</span>       modified:   ViewController.h
<span class="generic prompt">#</span>       modified:   ViewController.m
<span class="generic prompt">#</span>       modified:   en.lproj/MainStoryboard.storyboard
</pre>
<p>先看Storyboard</p>
<pre class="code console literal-block">
<span class="generic output">--- a/first/en.lproj/MainStoryboard.storyboard
+++ b/first/en.lproj/MainStoryboard.storyboard
&#64;&#64; -23,6 +23,9 &#64;&#64;
                         &lt;/subviews&gt;
                         &lt;color key=&quot;backgroundColor&quot; white=&quot;1&quot; alpha=&quot;1&quot; colorSpace=&quot;custom&quot; customColorSpace=&quot;calibratedWhite&quot;/&gt;
                     &lt;/view&gt;
+                    &lt;connections&gt;
+                        &lt;outlet property=&quot;statusLabel&quot; destination=&quot;qCc-nf-TgC&quot; id=&quot;b2g-zn-NAy&quot;/&gt;
+                    &lt;/connections&gt;
                 &lt;/viewController&gt;
             &lt;/objects&gt;
         &lt;/scene&gt;
&#64;&#64; -30,6 +33,9 &#64;&#64;
     &lt;classes&gt;
         &lt;class className=&quot;ViewController&quot; superclassName=&quot;UIViewController&quot;&gt;
             &lt;source key=&quot;sourceIdentifier&quot; type=&quot;project&quot; relativePath=&quot;./Classes/ViewController.h&quot;/&gt;
+            &lt;relationships&gt;
+                &lt;relationship kind=&quot;outlet&quot; name=&quot;statusLabel&quot; candidateClass=&quot;UILabel&quot;/&gt;
+            &lt;/relationships&gt;
         &lt;/class&gt;
     &lt;/classes&gt;</span>
</pre>
<p>也做了2件事：</p>
<ol class="arabic simple">
<li>增加connections元素，设置outlet关联到前面的label：outlet.destination == label.id</li>
<li>增加relationships元素，添加子节点relationship，kind为outlet。</li>
</ol>
<p>再看ViewController.h。增加了一行：</p>
<pre class="code c literal-block">
<span class="error">&#64;</span><span class="name">property</span> <span class="punctuation">(</span><span class="name">strong</span><span class="punctuation">,</span> <span class="name">nonatomic</span><span class="punctuation">)</span> <span class="name">IBOutlet</span> <span class="name">UILabel</span><span class="operator">*</span> <span class="name">statusLabel</span><span class="punctuation">;</span>
</pre>
<p>在ViewController类中对应增加statusLabel数据成员。</p>
<p>ViewController.m中增加了2行：</p>
<pre class="code c literal-block">
<span class="operator">---</span> <span class="name">a</span><span class="operator">/</span><span class="name">first</span><span class="operator">/</span><span class="name">ViewController</span><span class="punctuation">.</span><span class="name">m</span>
<span class="operator">+++</span> <span class="name">b</span><span class="operator">/</span><span class="name">first</span><span class="operator">/</span><span class="name">ViewController</span><span class="punctuation">.</span><span class="name">m</span>
<span class="error">&#64;&#64;</span> <span class="operator">-</span><span class="literal number integer">9</span><span class="punctuation">,</span><span class="literal number integer">6</span> <span class="operator">+</span><span class="literal number integer">9</span><span class="punctuation">,</span><span class="literal number integer">7</span> <span class="error">&#64;&#64;</span>
 <span class="comment preproc">#import &quot;ViewController.h&quot;
</span>
 <span class="error">&#64;</span><span class="name">implementation</span> <span class="name">ViewController</span>
<span class="operator">+</span><span class="error">&#64;</span><span class="name">synthesize</span> <span class="name">statusLabel</span><span class="punctuation">;</span>

 <span class="operator">-</span> <span class="punctuation">(</span><span class="keyword type">void</span><span class="punctuation">)</span><span class="name">didReceiveMemoryWarning</span>
 <span class="punctuation">{</span>
<span class="error">&#64;&#64;</span> <span class="operator">-</span><span class="literal number integer">26</span><span class="punctuation">,</span><span class="literal number integer">6</span> <span class="operator">+</span><span class="literal number integer">27</span><span class="punctuation">,</span><span class="literal number integer">7</span> <span class="error">&#64;&#64;</span>

 <span class="operator">-</span> <span class="punctuation">(</span><span class="keyword type">void</span><span class="punctuation">)</span><span class="name">viewDidUnload</span>
 <span class="punctuation">{</span>
<span class="operator">+</span>    <span class="punctuation">[</span><span class="name">self</span> <span class="name">setStatusLabel</span><span class="operator">:</span><span class="name">nil</span><span class="punctuation">];</span>
     <span class="punctuation">[</span><span class="name">super</span> <span class="name">viewDidUnload</span><span class="punctuation">];</span>
     <span class="comment single">// Release any retained subviews of the main view.
</span>     <span class="comment single">// e.g. self.myOutlet = nil;
</span>
</pre>
<p>增加的&#64;synthesize行表示自动增加对应数据成员的get和set成员函数。</p>
<p>viewDidUnload是结束程序时的操作，这里将label的内存空间释放。</p>
</div>
<div class="section" id="button">
<h2>添加button</h2>
<p>添加button后，Storyboard中在subviews下增加了button元素。</p>
<pre class="code console literal-block">
<span class="generic output">                            &lt;/label&gt;
+                            &lt;button opaque=&quot;NO&quot; contentMode=&quot;scaleToFill&quot; contentHorizontalAlignment=&quot;center&quot; contentVerticalAlignment
+                                &lt;rect key=&quot;frame&quot; x=&quot;26&quot; y=&quot;13&quot; width=&quot;72&quot; height=&quot;37&quot;/&gt;
+                                &lt;autoresizingMask key=&quot;autoresizingMask&quot; flexibleMaxX=&quot;YES&quot; flexibleMaxY=&quot;YES&quot;/&gt;
+                                &lt;fontDescription key=&quot;fontDescription&quot; type=&quot;boldSystem&quot; pointSize=&quot;15&quot;/&gt;
+                                &lt;state key=&quot;normal&quot;&gt;
+                                    &lt;color key=&quot;titleColor&quot; red=&quot;0.19607843459999999&quot; green=&quot;0.30980393290000002&quot; blue=&quot;0.521568656000
+                                    &lt;color key=&quot;titleShadowColor&quot; white=&quot;0.5&quot; alpha=&quot;1&quot; colorSpace=&quot;calibratedWhite&quot;/&gt;
+                                &lt;/state&gt;
+                                &lt;state key=&quot;highlighted&quot;&gt;
+                                    &lt;color key=&quot;titleColor&quot; white=&quot;1&quot; alpha=&quot;1&quot; colorSpace=&quot;calibratedWhite&quot;/&gt;
+                                &lt;/state&gt;
+                            &lt;/button&gt;
                         &lt;/subviews&gt;</span>
</pre>
</div>
<div class="section" id="action">
<h2>action关联</h2>
<p>设置action关联后，ViewController类中添加了事件方法和具体实现。</p>
<p>Storyboard中，button元素下增加了connections元素。relationships节点下增加子节点relationship，kind为action。</p>
<pre class="code console literal-block">
<span class="generic output">                             &lt;state key=&quot;highlighted&quot;&gt;
                                 &lt;color key=&quot;titleColor&quot; white=&quot;1&quot; alpha=&quot;1&quot; colorSpace=&quot;calibratedWhite&quot;/&gt;
                             &lt;/state&gt;
+                                &lt;connections&gt;
+                                    &lt;action selector=&quot;greeting:&quot; destination=&quot;2&quot; eventType=&quot;touchUpInside&quot; id=&quot;Ua1-dU-BsV&quot;/&gt;
+                                &lt;/connections&gt;
                             &lt;/button&gt;
                         &lt;/subviews&gt;
                         &lt;color key=&quot;backgroundColor&quot; white=&quot;1&quot; alpha=&quot;1&quot; colorSpace=&quot;custom&quot; customColorSpace=&quot;calibratedWhite&quot;/&gt;
&#64;&#64; -46,6 +49,7 &#64;&#64;
         &lt;class className=&quot;ViewController&quot; superclassName=&quot;UIViewController&quot;&gt;
             &lt;source key=&quot;sourceIdentifier&quot; type=&quot;project&quot; relativePath=&quot;./Classes/ViewController.h&quot;/&gt;
             &lt;relationships&gt;
+                &lt;relationship kind=&quot;action&quot; name=&quot;greeting:&quot;/&gt;
                 &lt;relationship kind=&quot;outlet&quot; name=&quot;statusLabel&quot; candidateClass=&quot;UILabel&quot;/&gt;
             &lt;/relationships&gt;
         &lt;/class&gt;</span>
</pre>
<p>AppDelegate.h</p>
<pre class="code c literal-block">
<span class="comment preproc">#import &lt;UIKit/UIKit.h&gt;
</span>
<span class="error">&#64;</span><span class="name">interface</span> <span class="name">BIDAppDelegate</span> <span class="operator">:</span> <span class="name">UIResponder</span> <span class="operator">&lt;</span><span class="name">UIApplicationDelegate</span><span class="operator">&gt;</span>

<span class="error">&#64;</span><span class="name">property</span> <span class="punctuation">(</span><span class="name">strong</span><span class="punctuation">,</span> <span class="name">nonatomic</span><span class="punctuation">)</span> <span class="name">UIWindow</span><span class="operator">*</span> <span class="name">window</span><span class="punctuation">;</span>

<span class="error">&#64;</span><span class="name">end</span>
</pre>
<p>AppDelegate.m</p>
<p>方法：</p>
<ul>
<li><p class="first">application:didFinishLaunchingWithOptions</p>
<p>这是一个多重参数函数</p>
</li>
<li><p class="first">applicationWillResignActive</p>
</li>
</ul>
</div>
<div class="section" id="id1">
<h2>表格使用</h2>
<ol class="arabic simple">
<li>拖入表格，选中并关联到下面的 View Controller，关联上dataSource和Delegate。</li>
<li>ViewController.h中类要实现UITableViewDataSource和UITableViewDelegate。</li>
</ol>
<pre class="code c literal-block">
<span class="error">&#64;</span><span class="name">interface</span> <span class="name">MasterViewController</span> <span class="operator">:</span> <span class="name">UITableViewController</span> <span class="operator">&lt;</span><span class="name">UITableViewDelegate</span><span class="punctuation">,</span> <span class="name">UITableViewDataSource</span><span class="operator">&gt;</span>

<span class="error">&#64;</span><span class="name">property</span> <span class="punctuation">(</span><span class="name">strong</span><span class="punctuation">,</span> <span class="name">nonatomic</span><span class="punctuation">)</span> <span class="name">NSArray</span><span class="operator">*</span> <span class="name">listData</span><span class="punctuation">;</span>
</pre>
<ol class="arabic simple">
<li>ViewController.m中增加如下函数：</li>
</ol>
<pre class="code c literal-block">
<span class="error">&#64;</span><span class="name">synthesize</span> <span class="name">listData</span><span class="punctuation">;</span>

<span class="operator">-</span> <span class="punctuation">(</span><span class="name">NSInteger</span><span class="punctuation">)</span><span class="name">tableView</span><span class="operator">:</span><span class="punctuation">(</span><span class="name">UITableView</span><span class="operator">*</span> <span class="punctuation">)</span><span class="name">tableView</span> <span class="name">numberOfRowsInSection</span><span class="operator">:</span><span class="punctuation">(</span><span class="name">NSInteger</span><span class="punctuation">)</span><span class="name">section</span> <span class="punctuation">{</span>
    <span class="keyword">return</span> <span class="punctuation">[</span><span class="name">self</span><span class="punctuation">.</span><span class="name">listData</span> <span class="name">count</span><span class="punctuation">];</span>
<span class="punctuation">}</span>

<span class="operator">-</span> <span class="punctuation">(</span><span class="name">UITableViewCell</span><span class="operator">*</span> <span class="punctuation">)</span><span class="name">tableView</span><span class="operator">:</span><span class="punctuation">(</span><span class="name">UITableView</span><span class="operator">*</span> <span class="punctuation">)</span><span class="name">tableView</span> <span class="name">cellForRowAtIndexPath</span><span class="operator">:</span><span class="punctuation">(</span><span class="name">NSIndexPath</span><span class="operator">*</span> <span class="punctuation">)</span><span class="name">indexPath</span> <span class="punctuation">{</span>
    <span class="keyword">static</span> <span class="name">NSString</span><span class="operator">*</span> <span class="name">SimpleTableIdentifier</span> <span class="operator">=</span> <span class="error">&#64;</span><span class="literal string">&quot;SimpleTableIndentifier&quot;</span><span class="punctuation">;</span>

    <span class="name">UITableViewCell</span><span class="operator">*</span> <span class="name">cell</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="name">tableView</span> <span class="name">dequeueReusableCellWithIdentifier</span><span class="operator">:</span><span class="name">SimpleTableIdentifier</span><span class="punctuation">];</span>
    <span class="keyword">if</span><span class="punctuation">(</span> <span class="name">cell</span> <span class="operator">==</span> <span class="name">nil</span><span class="punctuation">)</span> <span class="punctuation">{</span>
        <span class="name">cell</span> <span class="operator">=</span> <span class="punctuation">[[</span><span class="name">UITableViewCell</span> <span class="name">alloc</span><span class="punctuation">]</span> <span class="name">initWithStyle</span><span class="operator">:</span><span class="name">UITableViewCellStyleDefault</span> <span class="name">reuseIdentifier</span><span class="operator">:</span><span class="name">SimpleTableIdentifier</span><span class="punctuation">];</span>
    <span class="punctuation">}</span>

    <span class="name">NSUInteger</span> <span class="name">row</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="name">indexPath</span> <span class="name">row</span><span class="punctuation">];</span>
    <span class="name">cell</span><span class="punctuation">.</span><span class="name">textLabel</span><span class="punctuation">.</span><span class="name">text</span> <span class="operator">=</span> <span class="punctuation">[</span><span class="name">listData</span> <span class="name">objectAtIndex</span><span class="operator">:</span><span class="name">row</span><span class="punctuation">];</span>
    <span class="keyword">return</span> <span class="name">cell</span><span class="punctuation">;</span>
<span class="punctuation">}</span>
</pre>
</div>
<div class="section" id="id2">
<h2>多视图控制</h2>
<p>注意segue的使用，一定要聚焦到特定的控件上，比如button，而不是它的父控件，否则无效。</p>
</div>
<div class="section" id="id3">
<h2>参考资料</h2>
<p><a class="reference external" href="http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1">http://www.raywenderlich.com/5138/beginning-storyboards-in-ios-5-part-1</a></p>
</div>
</section>
<section class="meta">

<span class="tags">
  tagged by 
  
</span>

<span class="time">
  <time datetime="2012-03-16">2012-03-16</time>
</span>
</section>


        </article>
        <!-- PingLun.La Begin -->
        <div id="pinglunla_here"></div><a href="http://pinglun.la/" id="logo-pinglunla">评论啦</a><script type="text/javascript" src="http://static.pinglun.la/md/pinglun.la.js" charset="utf-8"></script>
        <!-- PingLun.La End -->
        <div id="copy">&copy; 2012 amoblin | powered by jekyll | themed by <a href="http://lhzhang.com" title="sext ii">sext ii</a></div>
      </div>
    </div> <!--! end of #container -->
  </body>
</html>
